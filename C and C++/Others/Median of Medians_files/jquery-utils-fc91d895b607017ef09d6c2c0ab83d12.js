(function(){var d,c,a,b=function(e,f){return function(){return e.apply(f,arguments)}};d=jQuery;c=(function(){function e(){}e.transitions={webkitTransition:"webkitTransitionEnd",mozTransition:"mozTransitionEnd",oTransition:"oTransitionEnd",transition:"transitionend"};e.transition=function(g){var i,f,h,j;i=g[0];j=this.transitions;for(h in j){f=j[h];if(i.style[h]!=null){return f}}};return e})();a=(function(){e.settings={namespace:"growl",duration:3200,close:"&times;",location:"default",style:"default",size:"medium"};e.growl=function(f){if(f==null){f={}}this.initialize();return new e(f)};e.initialize=function(){return d("body:not(:has(#growls))").append('<div id="growls" />')};function e(f){if(f==null){f={}}this.html=b(this.html,this);this.$growl=b(this.$growl,this);this.$growls=b(this.$growls,this);this.animate=b(this.animate,this);this.remove=b(this.remove,this);this.dismiss=b(this.dismiss,this);this.present=b(this.present,this);this.cycle=b(this.cycle,this);this.close=b(this.close,this);this.unbind=b(this.unbind,this);this.bind=b(this.bind,this);this.render=b(this.render,this);this.settings=d.extend({},e.settings,f);this.$growls().attr("class",this.settings.location);this.render()}e.prototype.render=function(){var f;f=this.$growl();this.$growls().append(f);if(this.settings["static"]!=null){this.present()}else{this.cycle()}};e.prototype.bind=function(f){if(f==null){f=this.$growl()}return f.on("contextmenu",this.close).find("."+this.settings.namespace+"-close").on("click",this.close)};e.prototype.unbind=function(f){if(f==null){f=this.$growl()}return f.off("contextmenu",this.close).find("."+(this.settings.namespace-close)).off("click",this.close)};e.prototype.close=function(g){var f;g.preventDefault();g.stopPropagation();f=this.$growl();return f.stop().queue(this.dismiss).queue(this.remove)};e.prototype.cycle=function(){var f;f=this.$growl();return f.queue(this.present).delay(this.settings.duration).queue(this.dismiss).queue(this.remove)};e.prototype.present=function(g){var f;f=this.$growl();this.bind(f);return this.animate(f,""+this.settings.namespace+"-incoming","out",g)};e.prototype.dismiss=function(g){var f;f=this.$growl();this.unbind(f);return this.animate(f,""+this.settings.namespace+"-outgoing","in",g)};e.prototype.remove=function(f){this.$growl().remove();return f()};e.prototype.animate=function(f,g,h,j){var i;if(h==null){h="in"}i=c.transition(f);f[h==="in"?"removeClass":"addClass"](g);f.offset().position;f[h==="in"?"addClass":"removeClass"](g);if(j==null){return}if(i!=null){f.one(i,j)}else{j()}};e.prototype.$growls=function(){return this.$_growls!=null?this.$_growls:this.$_growls=d("#growls")};e.prototype.$growl=function(){return this.$_growl!=null?this.$_growl:this.$_growl=d(this.html())};e.prototype.html=function(){return"<div class='"+this.settings.namespace+" "+this.settings.namespace+"-"+this.settings.style+" "+this.settings.namespace+"-"+this.settings.size+"'>\n  <div class='"+this.settings.namespace+"-close'>"+this.settings.close+"</div>\n  <div class='"+this.settings.namespace+"-title'>"+this.settings.title+"</div>\n  <div class='"+this.settings.namespace+"-message'>"+this.settings.message+"</div>\n</div>"};return e})();d.growl=function(e){if(e==null){e={}}return a.growl(e)};d.growl.error=function(e){var f;if(e==null){e={}}f={title:"Error!",style:"error"};return d.growl(d.extend(f,e))};d.growl.notice=function(e){var f;if(e==null){e={}}f={title:"Notice!",style:"notice"};return d.growl(d.extend(f,e))};d.growl.warning=function(e){var f;if(e==null){e={}}f={title:"Warning!",style:"warning"};return d.growl(d.extend(f,e))}}).call(this);(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(d){d.timeago=function(h){if(h instanceof Date){return a(h)}else{if(typeof h==="string"){return a(d.timeago.parse(h))}else{if(typeof h==="number"){return a(new Date(h))}else{return a(d.timeago.datetime(h))}}}};var g=d.timeago;d.extend(d.timeago,{settings:{refreshMillis:60000,allowPast:true,allowFuture:false,localeTitle:false,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(n){if(!this.settings.allowPast&&!this.settings.allowFuture){throw"timeago allowPast and allowFuture settings can not both be set to false."}var o=this.settings.strings;var k=o.prefixAgo;var s=o.suffixAgo;if(this.settings.allowFuture){if(n<0){k=o.prefixFromNow;s=o.suffixFromNow}}if(!this.settings.allowPast&&n>=0){return this.settings.strings.inPast}var q=Math.abs(n)/1000;var h=q/60;var p=h/60;var r=p/24;var l=r/365;function j(t,v){var u=d.isFunction(t)?t(v,n):t;var w=(o.numbers&&o.numbers[v])||v;return u.replace(/%d/i,w)}var m=q<45&&j(o.seconds,Math.round(q))||q<90&&j(o.minute,1)||h<45&&j(o.minutes,Math.round(h))||h<90&&j(o.hour,1)||p<24&&j(o.hours,Math.round(p))||p<42&&j(o.day,1)||r<30&&j(o.days,Math.round(r))||r<45&&j(o.month,1)||r<365&&j(o.months,Math.round(r/30))||l<1.5&&j(o.year,1)||j(o.years,Math.round(l));var i=o.wordSeparator||"";if(o.wordSeparator===undefined){i=" "}return d.trim([k,m,s].join(i))},parse:function(i){var h=d.trim(i);h=h.replace(/\.\d+/,"");h=h.replace(/-/,"/").replace(/-/,"/");h=h.replace(/T/," ").replace(/Z/," UTC");h=h.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");h=h.replace(/([\+\-]\d\d)$/," $100");return new Date(h)},datetime:function(i){var h=g.isTime(i)?d(i).attr("datetime"):d(i).attr("title");return g.parse(h)},isTime:function(h){return d(h).get(0).tagName.toLowerCase()==="time"}});var e={init:function(){var i=d.proxy(c,this);i();var h=g.settings;if(h.refreshMillis>0){this._timeagoInterval=setInterval(i,h.refreshMillis)}},update:function(h){var i=g.parse(h);d(this).data("timeago",{datetime:i});if(g.settings.localeTitle){d(this).attr("title",i.toLocaleString())}c.apply(this)},updateFromDOM:function(){d(this).data("timeago",{datetime:g.parse(g.isTime(this)?d(this).attr("datetime"):d(this).attr("title"))});c.apply(this)},dispose:function(){if(this._timeagoInterval){window.clearInterval(this._timeagoInterval);this._timeagoInterval=null}}};d.fn.timeago=function(j,h){var i=j?e[j]:e.init;if(!i){throw new Error("Unknown function name '"+j+"' for timeago")}this.each(function(){i.call(this,h)});return this};function c(){var i=b(this);var h=g.settings;if(!isNaN(i.datetime)){if(h.cutoff==0||f(i.datetime)<h.cutoff){d(this).text(a(i.datetime))}}return this}function b(h){h=d(h);if(!h.data("timeago")){h.data("timeago",{datetime:g.datetime(h)});var i=d.trim(h.text());if(g.settings.localeTitle){h.attr("title",h.data("timeago").datetime.toLocaleString())}else{if(i.length>0&&!(g.isTime(h)&&h.attr("title"))){h.attr("title",i)}}}return h.data("timeago")}function a(h){return g.inWords(f(h))}function f(h){return(new Date().getTime()-h.getTime())}document.createElement("abbr");document.createElement("time")}));(function(c){var a=new Array();var b=new Array();c.fn.doAutosize=function(h){var f=c(this).data("minwidth"),p=c(this).data("maxwidth"),k="",n=c(this),j=c("#"+c(this).data("tester_id"));if(k===(k=n.val())){return}var e=k.replace(/&/g,"&amp;").replace(/\s/g," ").replace(/</g,"&lt;").replace(/>/g,"&gt;");j.html(e);var m=j.width(),l=(m+h.comfortZone)>=f?m+h.comfortZone:f,g=n.width(),d=(l<g&&l>=f)||(l>f&&l<p);if(d){n.width(l)}};c.fn.resetAutosize=function(f){var h=c(this).data("minwidth")||f.minInputWidth||c(this).width(),j=c(this).data("maxwidth")||f.maxInputWidth||(c(this).closest(".tagsinput").width()-f.inputPadding),k="",e=c(this),g=c("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"}),d=c(this).attr("id")+"_autosize_tester";if(!c("#"+d).length>0){g.attr("id",d);g.appendTo("body")}e.data("minwidth",h);e.data("maxwidth",j);e.data("tester_id",d);e.css("width",h)};c.fn.addTag=function(e,d){d=jQuery.extend({focus:false,callback:true},d);this.each(function(){var l=c(this).attr("id");var g=c(this).val().split(a[l]);if(g[0]==""){g=new Array()}e=jQuery.trim(e);if(d.unique){var h=c(this).tagExist(e);if(h==true){c("#"+l+"_tag").addClass("not_valid")}}else{var h=false}if(e!=""&&h!=true){c("<span>").addClass("tag").append(c("<span>").text(e).append("&nbsp;&nbsp;"),c('<a class="tagsinput-remove-link">',{href:"#",title:"Remove tag",text:""}).click(function(){return c("#"+l).removeTag(escape(e))})).insertBefore("#"+l+"_addTag");g.push(e);c("#"+l+"_tag").val("");if(d.focus){c("#"+l+"_tag").focus()}else{c("#"+l+"_tag").blur()}c.fn.tagsInput.updateTagsField(this,g);if(d.callback&&b[l]&&b[l]["onAddTag"]){var k=b[l]["onAddTag"];k.call(this,e)}if(b[l]&&b[l]["onChange"]){var j=g.length;var k=b[l]["onChange"];k.call(this,c(this),g[j-1])}}});return false};c.fn.removeTag=function(d){d=unescape(d);this.each(function(){var h=c(this).attr("id");var e=c(this).val().split(a[h]);c("#"+h+"_tagsinput .tag").remove();str="";for(i=0;i<e.length;i++){if(e[i]!=d){str=str+a[h]+e[i]}}c.fn.tagsInput.importTags(this,str);if(b[h]&&b[h]["onRemoveTag"]){var g=b[h]["onRemoveTag"];g.call(this,d)}});return false};c.fn.tagExist=function(e){var f=c(this).attr("id");var d=c(this).val().split(a[f]);return(jQuery.inArray(e,d)>=0)};c.fn.importTags=function(d){id=c(this).attr("id");c("#"+id+"_tagsinput .tag").remove();c.fn.tagsInput.importTags(this,d)};c.fn.tagsInput=function(d){var e=jQuery.extend({interactive:true,defaultText:"",minChars:0,width:"",height:"",autocomplete:{selectFirst:false},hide:true,delimiter:",",unique:true,removeWithBackspace:true,placeholderColor:"#666666",autosize:true,comfortZone:20,inputPadding:6*2},d);this.each(function(){if(e.hide){c(this).hide()}var j=c(this).attr("id");if(!j||a[c(this).attr("id")]){j=c(this).attr("id","tags"+new Date().getTime()).attr("id")}var g=jQuery.extend({pid:j,real_input:"#"+j,holder:"#"+j+"_tagsinput",input_wrapper:"#"+j+"_addTag",fake_input:"#"+j+"_tag"},e);a[j]=g.delimiter;if(e.onAddTag||e.onRemoveTag||e.onChange){b[j]=new Array();b[j]["onAddTag"]=e.onAddTag;b[j]["onRemoveTag"]=e.onRemoveTag;b[j]["onChange"]=e.onChange}var h=c("#"+j).attr("class").replace("tagsinput","");var f='<div id="'+j+'_tagsinput" class="tagsinput '+h+'"><div class="tagsinput-add-container" id="'+j+'_addTag"><div class="tagsinput-add"></div>';if(e.interactive){f=f+'<input id="'+j+'_tag" value="" data-default="'+e.defaultText+'" />'}f=f+"</div></div>";c(f).insertAfter(this);c(g.holder).css("width",e.width);c(g.holder).css("min-height",e.height);c(g.holder).css("height","100%");if(c(g.real_input).val()!=""){c.fn.tagsInput.importTags(c(g.real_input),c(g.real_input).val())}if(e.interactive){c(g.fake_input).val(c(g.fake_input).attr("data-default"));c(g.fake_input).css("color",e.placeholderColor);c(g.fake_input).resetAutosize(e);c(g.holder).bind("click",g,function(k){c(k.data.fake_input).focus()});c(g.fake_input).bind("focus",g,function(k){if(c(k.data.fake_input).val()==c(k.data.fake_input).attr("data-default")){c(k.data.fake_input).val("")}c(k.data.fake_input).css("color","#000000")});if(e.autocomplete_url!=undefined){autocomplete_options={source:e.autocomplete_url};for(attrname in e.autocomplete){autocomplete_options[attrname]=e.autocomplete[attrname]}if(jQuery.Autocompleter!==undefined){c(g.fake_input).autocomplete(e.autocomplete_url,e.autocomplete);c(g.fake_input).bind("result",g,function(k,m,l){if(m){c("#"+j).addTag(m[0]+"",{focus:true,unique:(e.unique)})}})}else{if(jQuery.ui.autocomplete!==undefined){c(g.fake_input).autocomplete(autocomplete_options);c(g.fake_input).bind("autocompleteselect",g,function(k,l){c(k.data.real_input).addTag(l.item.value,{focus:true,unique:(e.unique)});return false})}}}else{c(g.fake_input).bind("blur",g,function(k){var l=c(this).attr("data-default");if(c(k.data.fake_input).val()!=""&&c(k.data.fake_input).val()!=l){if((k.data.minChars<=c(k.data.fake_input).val().length)&&(!k.data.maxChars||(k.data.maxChars>=c(k.data.fake_input).val().length))){c(k.data.real_input).addTag(c(k.data.fake_input).val(),{focus:true,unique:(e.unique)})}}else{c(k.data.fake_input).val(c(k.data.fake_input).attr("data-default"));c(k.data.fake_input).css("color",e.placeholderColor)}return false})}c(g.fake_input).bind("keypress",g,function(k){if(k.which==k.data.delimiter.charCodeAt(0)||k.which==13){k.preventDefault();if((k.data.minChars<=c(k.data.fake_input).val().length)&&(!k.data.maxChars||(k.data.maxChars>=c(k.data.fake_input).val().length))){c(k.data.real_input).addTag(c(k.data.fake_input).val(),{focus:true,unique:(e.unique)})}c(k.data.fake_input).resetAutosize(e);return false}else{if(k.data.autosize){c(k.data.fake_input).doAutosize(e)}}});g.removeWithBackspace&&c(g.fake_input).bind("keydown",function(l){if(l.keyCode==8&&c(this).val()==""){l.preventDefault();var k=c(this).closest(".tagsinput").find(".tag:last").text();var m=c(this).attr("id").replace(/_tag$/,"");k=k.replace(/[\s\u00a0]+x$/,"");c("#"+m).removeTag(escape(k));c(this).trigger("focus")}});c(g.fake_input).blur();if(g.unique){c(g.fake_input).keydown(function(k){if(k.keyCode==8||String.fromCharCode(k.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/)){c(this).removeClass("not_valid")}})}}});return this};c.fn.tagsInput.updateTagsField=function(e,d){var f=c(e).attr("id");c(e).val(d.join(a[f]))};c.fn.tagsInput.importTags=function(g,h){c(g).val("");var j=c(g).attr("id");var d=h.split(a[j]);for(i=0;i<d.length;i++){c(g).addTag(d[i],{focus:false,callback:false})}if(b[j]&&b[j]["onChange"]){var e=b[j]["onChange"];e.call(g,g,d[i])}}})(jQuery);